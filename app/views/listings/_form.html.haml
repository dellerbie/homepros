= form_for @listing do |f|
  -if @listing.errors.any?
    #error_explanation
      %h2= "#{pluralize(@listing.errors.count, "error")} prohibited this listing from being saved:"
      %ul
        - @listing.errors.full_messages.each do |msg|
          %li= msg
  
  %fieldset.sample
    %p.title
      First, add a picture of your best work
    = image_tag('sample-listing-size.png', class: 'sample-listing-size')
    %p
      Upload an image of your work that best represents your primary style. You can always change this image after your card has been created.
    %p
      %strong
        For best results upload a 900 x 630 JPG or PNG.
      %em
        Don’t have that size? We’ll resize what you have to make sure it fits.
    
    = f.label :portfolio_photo_description, 'Describe the image you just added'   
    %span.help-block
      Example: This is a screenshot from our latest homepage redesign of starbucks.com
    = f.text_area :portfolio_photo_description
    
  %fieldset.company-info
    %p.title
      Now, tell us about your business
      
    = f.label :company_name, "What's your company name?"
    %span.help-block
      You can use your own name if you're a freelancer and don't have a company name.
    = f.text_field :company_name
    
    = f.label :company_name, "Upload your company logo (optional)"
    %span.help-block
      GIF, JPG, or PNG. We’ll resize what you have.
      %br
      This is shown on your listing page for clients to see.
    = f.file_field :company_name
    
    = f.label :budget_min, 'What type of budgets do you normally work with?'
    = f.label :budget_min, class: 'radio' do
      = f.radio_button :budget_min, ''
      $3,000 and under
    = f.label :budget_min, class: 'radio' do
      = f.radio_button :budget_min, ''
      $3,000-$10,000
    = f.label :budget_min, class: 'radio' do
      = f.radio_button :budget_min, ''
      $10,000-$25,000
    = f.label :budget_min, class: 'radio' do
      = f.radio_button :budget_min, ''
      $25,000-$50,000
    = f.label :budget_min, class: 'radio' do
      = f.radio_button :budget_min, ''
      Over $50,000

    = f.label :city, "Which city or metro area is closest to your company headquarters?"
    %span.help-block
      %ul
        %li
          If your company has multiple locations, choose the main location. 
        %li 
          If your city is not listed, choose "My city is not listed".
    = f.select :city, ['Orange', 'Irvine', 'Tustin'], include_blank: true
  
  %fieldset.contact-info
    %p.title
      How can clients get in touch?
      
    = f.label :contact_email, 'Sales contact email (optional)'
    %span.help-block
      This is how clients will contact you (example: sales@mydomain.com)
    = f.text_field :contact_email

    = f.label :website, 'Website URL'
    = f.text_field :website
    
    = f.label :phone, 'Phone Number'
    .controls
      (
      = f.text_field :phone_area_code, class: 'span1'
      )
      = f.text_field :phone_pre, class: 'span1'
      &#45;
      = f.text_field :phone_post, class: 'span2'
      
  = fields_for @user do |u|
  
    %fieldset.account-info
      %p.title
        Finally, create an account
    
      = u.label :first_name, 'First name'
      = u.text_field :first_name
      
      = u.label :last_name, 'Last name'
      = u.text_field :last_name
      
      = u.label :email, 'Your email address'
      %span.help-block
        This is how we'll stay in touch (clients don’t see this address).
      = u.text_field :email
      
      = u.label :password, 'Password'
      %span.help-block
        Must be at least 6 characters.
      = u.password_field :password
        
      = u.label :password_confirmation, 'Password again'
      %span.help-block
        Confirm your password by entering it again.
      = u.password_field :password_confirmation

  .form-actions
    = f.submit 'Save', class: 'btn btn-primary'
    %button{type: 'button', class: 'btn'}
      Cancel
